<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éšŠå“¡é€šè¨ŠéŒ„æŸ¥è©¢</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root { --primary-color: #2c3e50; }
        body { background-color: #f8f9fa; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; }
        .navbar { background-color: var(--primary-color); color: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .sticky-search { position: sticky; top: 0; z-index: 1020; background: #f8f9fa; padding: 15px 0; border-bottom: 1px solid #dee2e6; }
        .nav-pills .nav-link { color: #555; background: #fff; margin: 2px; border: 1px solid #ddd; }
        .nav-pills .nav-link.active { background-color: var(--primary-color); border-color: var(--primary-color); }
        .contact-card { border: none; border-radius: 12px; transition: transform 0.2s; }
        .contact-card:active { transform: scale(0.98); }
        .phone-link { text-decoration: none; color: #007bff; font-weight: 500; font-size: 1.1rem; }
        .home-phone { color: #6c757d; font-size: 0.95rem; }
        .empty-state { text-align: center; padding: 40px; color: #999; }
    </style>
</head>
<body>

<nav class="navbar">
    <div class="container-fluid justify-content-center">
        <span class="navbar-brand mb-0 h1 text-white">2026 éšŠå“¡åå–®æŸ¥è©¢</span>
    </div>
</nav>

<div class="container">
    <div class="sticky-search">
        <input type="text" id="searchInput" class="form-control form-control-lg shadow-sm" placeholder="ğŸ” è¼¸å…¥å§“åæˆ–é›»è©±æœå°‹...">
    </div>

    <ul class="nav nav-pills nav-fill my-3" id="sheetTabs">
        <li class="nav-item"><a class="nav-link active" data-file="data1.json" href="#">å”åŠ›ä¸€</a></li>
        <li class="nav-item"><a class="nav-link" data-file="data2.json" href="#">å”åŠ›äºŒ</a></li>
        <li class="nav-item"><a class="nav-link" data-file="data3.json" href="#">å”åŠ›ä¸‰</a></li>
        <li class="nav-item"><a class="nav-link" data-file="data4.json" href="#">å”åŠ›å››</a></li>
    </ul>

    <div id="contactList" class="row g-3">
        </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
    let currentData = [];
    let currentFile = 'data1.json';

    // åˆå§‹åŒ–ï¼šè¼‰å…¥ç¬¬ä¸€ä»½è³‡æ–™
    $(document).ready(function() {
        loadData(currentFile);
    });

    // åˆ‡æ›é ç±¤é‚è¼¯
    $('#sheetTabs a').on('click', function(e) {
        e.preventDefault();
        $('#sheetTabs a').removeClass('active');
        $(this).addClass('active');
        
        currentFile = $(this).data('file');
        $('#searchInput').val(''); // åˆ‡æ›æ™‚æ¸…ç©ºæœå°‹
        loadData(currentFile);
    });

    // æ ¸å¿ƒè®€å–å‡½å¼
    function loadData(fileName) {
        // åŠ å…¥éš¨æ©Ÿåƒæ•¸é˜²æ­¢ GitHub Pages å¿«å–èˆŠè³‡æ–™
        const url = `./data/${fileName}?v=${new Date().getTime()}`;
        
        $('#contactList').html('<div class="text-center w-100 mt-5"><div class="spinner-border text-secondary"></div><p>è¼‰å…¥ä¸­...</p></div>');

        fetch(url)
            .then(res => {
                if (!res.ok) throw new Error('æ‰¾ä¸åˆ°è³‡æ–™æª”æ¡ˆ');
                return res.json();
            })
            .then(data => {
                currentData = data;
                renderData(data);
            })
            .catch(err => {
                $('#contactList').html(`<div class="empty-state">âŒ ç„¡æ³•è®€å– ${fileName}<br>è«‹ç¢ºèª data è³‡æ–™å¤¾å…§æ˜¯å¦æœ‰è©²æª”æ¡ˆã€‚</div>`);
            });
    }

    // æ¸²æŸ“å¡ç‰‡ç•«é¢
    function renderData(data) {
        const container = $('#contactList');
        container.empty();

        if (data.length === 0) {
            container.html('<div class="empty-state">æŸ¥ç„¡ç›¸é—œéšŠå“¡è³‡æ–™</div>');
            return;
        }

        data.forEach(item => {
            const card = `
                <div class="col-12 col-md-6 col-lg-4">
                    <div class="card contact-card shadow-sm h-100">
                        <div class="card-body">
                            <h5 class="card-title d-flex justify-content-between align-items-center">
                                <strong>${item.name}</strong>
                                <span class="badge bg-light text-dark fw-normal border" style="font-size: 0.75rem;">éšŠå“¡</span>
                            </h5>
                            <hr class="my-2 opacity-50">
                            <div class="card-text">
                                <div class="mb-2">
                                    <small class="text-muted d-block">æ‰‹æ©Ÿ</small>
                                    <a href="tel:${item.mobile_phone}" class="phone-link">ğŸ“± ${item.mobile_phone || 'ç„¡'}</a>
                                </div>
                                <div>
                                    <small class="text-muted d-block">ä½å®…é›»è©±</small>
                                    <span class="home-phone">ğŸ  ${item.home_phone || '---'}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            container.append(card);
        });
    }

    // æœå°‹éæ¿¾åŠŸèƒ½
    $('#searchInput').on('input', function() {
        const term = $(this).val().trim().toLowerCase();
        const filtered = currentData.filter(item => 
            item.name.toLowerCase().includes(term) || 
            item.mobile_phone.includes(term) ||
            item.home_phone.includes(term)
        );
        renderData(filtered);
    });
</script>

</body>
</html>